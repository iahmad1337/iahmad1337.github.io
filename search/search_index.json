{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"iahmad1337 04.12.2024 Building clangd from source \u2192 Building python from source \u2192 To-Read list -fpic (ru) & rip-relative addressing GCC vs GLIBCXX vs CXXABI versions stripping debug info determining BTB characteristics how bpf works in kernel OK cloud netshaper (ru) gcc plugin for compilation tracing easyperf memory profiling series static perf analysis visualization","title":"Home"},{"location":"#iahmad1337","text":"","title":"iahmad1337"},{"location":"#04122024","text":"Building clangd from source \u2192 Building python from source \u2192","title":"04.12.2024"},{"location":"#to-read-list","text":"-fpic (ru) & rip-relative addressing GCC vs GLIBCXX vs CXXABI versions stripping debug info determining BTB characteristics how bpf works in kernel OK cloud netshaper (ru) gcc plugin for compilation tracing easyperf memory profiling series static perf analysis visualization","title":"To-Read list"},{"location":"cheat-sheet/","text":"Bash ag \"message ProtoMessage\" -G \".*\\.proto$\" time soap make -i my_target && tmux display-popup -E sleep 1 && (cd testdir/my_target && ./test.sh &>/tmp/testlog; less /tmp/testlog) curl -d private=0 -d name=ahmad1337 -d api_dev_key=$key -d api_paste_name=\"file.cpp\" --data-urlencode text@/tmp/file.cpp https://paste228.com/api/v2/publish svn diff -r r10:r22 --summarize ^/branches/ahmad1337/TICKET-228 # calculator python3 -c \"print(2**20)\" svn diff -r HEAD:PREV config.xml svn diff -r HEAD:{2025-01-20} path/to/file.cpp combinediff header.hpp.diff source.cpp.diff >>result.diff # sort files by sizes accounting for suffixes (K for kilo, M for mega and etc.) (for i in $(ls); do du -xhs $i; done) | sort --key=1 -h # scp via jumphost-2 (is configured in ~/.ssh/config) scp -F ~/.ssh/config -J jumphost-2 ahmad1337@my.machine.ru:/tmp/logs.tar.gz . # Interpret bytes as x64 instructions ndisasm -a -b64 machine-code-dump # skip first 5 bytes ndisasm -e 5 -b64 # skip the bytes in range [4, 7) ndisasm -k 4,3 -b64 # compile to demangled asm (pre-linker) g++ -std=c++17 -S -masm=intel src/01-qlibs-jmp.cc -fPIC -I./include -o - | c++filt >jmp.asm # post-linker disasm g++ -std=c++17 src/03* -fPIC -I./include -g -o 03.out && objdump --disassemble -Mintel 03.out | c++filt >03.asm # get sections of and ELF file (+ their write/execute permissions) readelf -S my-program # check that function is indeed in the executable nm my-test-executable | grep SpecificTest | c++filt # List all files, opened by PID lsof -p <PID> # get environ of a process strings /proc/<PID>/environ # remove all invalid utf-8 sequences from file iconv -f utf-8 -t utf-8 -c file.txt GDB # launch gdb with some pre-run commands gdb -x gdb-commands.txt html_idx # print program output at terminal /dev/pts/15 (can be determined by writing tty # in target terminal gdb --tty=/dev/pts/15 -x /tmp/gdb-commands.txt --args ./binary-name --some-binary-flag --flag-2 fin (finish) - execute entire current frame and go back to parent frame u (until) 145 - execute all commands up until (but not including) line 145 backtrace (bt) - print backtrace bt full - backtrace with local variables down, up - go up and down the backtrace print <expression> - ochevidno # source viewing dir /home/ahmad1337/worktree/ - add one more lookup path for sources show directories - show the source lookup paths list src/kek.cpp:42 - go to this location # TUI tui enable/disable - can be toggled with \"ctrl-x + a\" Example debugger script with scrollback + output in separate terminals: #!/usr/bin/env bash cat << EOF >/tmp/gdb-script.txt tui enable tty /dev/pts/18 set trace-commands on set logging on EOF pushd build ninja && gdb -x /tmp/gdb-script.txt ./${BIN:-04-multithreaded} popd set trace-commands on & set logging on sends all output of gdb commands to $WORK_DIR/gdb.txt, which can be viewed in another terminal pane using tail -f gdb.txt tty /dev/pts/18 sends all program output to terminal /dev/pts/18 (can be determined via tty shell command. network # send one tcp request and wait for a response head -n1 queries-concatenated.txt | nc --no-shutdown -4 8.8.8.8 8000 # Get IP of a hostname (single AA/AAAA record) $ host 1.host.com # concrete instance (1 host) 1.host.com has address 10.20.6.2 # Name all AA/AAAA records behind this domain (in case of round-robin DNS) $ host host.com # all instances on cloud HC host.com has address 10.20.6.2 host.com has address 10.20.6.4 host.com has address 10.20.6.5 host.com has address 10.20.6.3 host.com has address 10.20.6.6 # List the listened-on ports and corresponding processes ss -tlnp processes # see all mappings of a process that take tens and hundreds of megabytes grep -B4 -E \"Rss:[[:blank:]]*[0-9]{5,6}\" /proc/273/smaps # Calculate honest RSS of a process that contains \"worker\" in its full command line cat /proc/$(pgrep --full --oldest worker)/smaps | grep Rss | awk '{s += $2}END{print s/1024 \" MiB\"}' 2>/dev/null | grep MiB # show all processes and the their entire command line ps all -e ww # kill process by name pkill --signal SIGKILL \"udp_shooter\" # use -f for full process command match # show memory map sizes of a process pmap $(pgrep --full --oldest worker) | sort -n -k2 # Show all (-e) processes + threads (-T) + full command (-f). Ps doesn't show separate threads by default ps -efT # Show all threads named \"worker\" for user ahamd1337 ps -u ahmad1337 -fT | grep worker system # check, if kernel was compiled with CONFIG_FTRACE option (/boot/config-* may also be in /proc/config.gz) for i in /boot/config-*; do zgrep \"CONFIG_FTRACE\" \"$i\"; done vim :%!c++filt -- demangle mangled identifiers in file (works for disasm or any -- other human-readable file) :g/worker-1[0-9]/d -- remove lines matching the pattern git # status without untracked files git status -uno","title":"cheat sheet"},{"location":"cheat-sheet/#bash","text":"ag \"message ProtoMessage\" -G \".*\\.proto$\" time soap make -i my_target && tmux display-popup -E sleep 1 && (cd testdir/my_target && ./test.sh &>/tmp/testlog; less /tmp/testlog) curl -d private=0 -d name=ahmad1337 -d api_dev_key=$key -d api_paste_name=\"file.cpp\" --data-urlencode text@/tmp/file.cpp https://paste228.com/api/v2/publish svn diff -r r10:r22 --summarize ^/branches/ahmad1337/TICKET-228 # calculator python3 -c \"print(2**20)\" svn diff -r HEAD:PREV config.xml svn diff -r HEAD:{2025-01-20} path/to/file.cpp combinediff header.hpp.diff source.cpp.diff >>result.diff # sort files by sizes accounting for suffixes (K for kilo, M for mega and etc.) (for i in $(ls); do du -xhs $i; done) | sort --key=1 -h # scp via jumphost-2 (is configured in ~/.ssh/config) scp -F ~/.ssh/config -J jumphost-2 ahmad1337@my.machine.ru:/tmp/logs.tar.gz . # Interpret bytes as x64 instructions ndisasm -a -b64 machine-code-dump # skip first 5 bytes ndisasm -e 5 -b64 # skip the bytes in range [4, 7) ndisasm -k 4,3 -b64 # compile to demangled asm (pre-linker) g++ -std=c++17 -S -masm=intel src/01-qlibs-jmp.cc -fPIC -I./include -o - | c++filt >jmp.asm # post-linker disasm g++ -std=c++17 src/03* -fPIC -I./include -g -o 03.out && objdump --disassemble -Mintel 03.out | c++filt >03.asm # get sections of and ELF file (+ their write/execute permissions) readelf -S my-program # check that function is indeed in the executable nm my-test-executable | grep SpecificTest | c++filt # List all files, opened by PID lsof -p <PID> # get environ of a process strings /proc/<PID>/environ # remove all invalid utf-8 sequences from file iconv -f utf-8 -t utf-8 -c file.txt","title":"Bash"},{"location":"cheat-sheet/#gdb","text":"# launch gdb with some pre-run commands gdb -x gdb-commands.txt html_idx # print program output at terminal /dev/pts/15 (can be determined by writing tty # in target terminal gdb --tty=/dev/pts/15 -x /tmp/gdb-commands.txt --args ./binary-name --some-binary-flag --flag-2 fin (finish) - execute entire current frame and go back to parent frame u (until) 145 - execute all commands up until (but not including) line 145 backtrace (bt) - print backtrace bt full - backtrace with local variables down, up - go up and down the backtrace print <expression> - ochevidno # source viewing dir /home/ahmad1337/worktree/ - add one more lookup path for sources show directories - show the source lookup paths list src/kek.cpp:42 - go to this location # TUI tui enable/disable - can be toggled with \"ctrl-x + a\" Example debugger script with scrollback + output in separate terminals: #!/usr/bin/env bash cat << EOF >/tmp/gdb-script.txt tui enable tty /dev/pts/18 set trace-commands on set logging on EOF pushd build ninja && gdb -x /tmp/gdb-script.txt ./${BIN:-04-multithreaded} popd set trace-commands on & set logging on sends all output of gdb commands to $WORK_DIR/gdb.txt, which can be viewed in another terminal pane using tail -f gdb.txt tty /dev/pts/18 sends all program output to terminal /dev/pts/18 (can be determined via tty shell command.","title":"GDB"},{"location":"cheat-sheet/#network","text":"# send one tcp request and wait for a response head -n1 queries-concatenated.txt | nc --no-shutdown -4 8.8.8.8 8000 # Get IP of a hostname (single AA/AAAA record) $ host 1.host.com # concrete instance (1 host) 1.host.com has address 10.20.6.2 # Name all AA/AAAA records behind this domain (in case of round-robin DNS) $ host host.com # all instances on cloud HC host.com has address 10.20.6.2 host.com has address 10.20.6.4 host.com has address 10.20.6.5 host.com has address 10.20.6.3 host.com has address 10.20.6.6 # List the listened-on ports and corresponding processes ss -tlnp","title":"network"},{"location":"cheat-sheet/#processes","text":"# see all mappings of a process that take tens and hundreds of megabytes grep -B4 -E \"Rss:[[:blank:]]*[0-9]{5,6}\" /proc/273/smaps # Calculate honest RSS of a process that contains \"worker\" in its full command line cat /proc/$(pgrep --full --oldest worker)/smaps | grep Rss | awk '{s += $2}END{print s/1024 \" MiB\"}' 2>/dev/null | grep MiB # show all processes and the their entire command line ps all -e ww # kill process by name pkill --signal SIGKILL \"udp_shooter\" # use -f for full process command match # show memory map sizes of a process pmap $(pgrep --full --oldest worker) | sort -n -k2 # Show all (-e) processes + threads (-T) + full command (-f). Ps doesn't show separate threads by default ps -efT # Show all threads named \"worker\" for user ahamd1337 ps -u ahmad1337 -fT | grep worker","title":"processes"},{"location":"cheat-sheet/#system","text":"# check, if kernel was compiled with CONFIG_FTRACE option (/boot/config-* may also be in /proc/config.gz) for i in /boot/config-*; do zgrep \"CONFIG_FTRACE\" \"$i\"; done","title":"system"},{"location":"cheat-sheet/#vim","text":":%!c++filt -- demangle mangled identifiers in file (works for disasm or any -- other human-readable file) :g/worker-1[0-9]/d -- remove lines matching the pattern","title":"vim"},{"location":"cheat-sheet/#git","text":"# status without untracked files git status -uno","title":"git"},{"location":"garage-sale/","text":"Garage Sale Upcoming sales and items.","title":"garage sale"},{"location":"garage-sale/#garage-sale","text":"Upcoming sales and items.","title":"Garage Sale"},{"location":"itsec/","text":"xorpd reversing exercises https://www.hse.ru/staff/PantiukhinDmitry/timetable","title":"Security"},{"location":"linux-admin/","text":"Usefull links: Advanced bash scripting and the whole playlist Lecture 2: Filesystems part I (inodes, links, permissions) TLPI Ch. 14-15 inodes in ext4 netcat dd ln chmod chown inode (index node, \u0438\u043d\u0434\u0435\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0440) - \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u044f\u0449\u0430\u044f \u043e\u0442 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0442\u0441\u0435\u043c\u044b \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c hard link - \u044d\u0442\u043e \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0446\u0438\u044f \u043f\u0443\u0442\u0438 \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 c inode. \u041f\u043e \u0441\u0443\u0442\u0438 Map<Path, INode> \u0445\u0430\u0440\u0434\u043b\u0438\u043d\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0424\u0421 (\u043d\u0435\u043b\u044c\u0437\u044f \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0438\u0437 /home \u0432 /var/log) \u0440\u0430\u0437\u043d\u044b\u0435 \u043c\u0430\u0443\u043d\u0442\u044b \u0424\u0421 \u0438\u043c\u0435\u044e\u0442 \u0440\u0430\u0437\u043d\u0443\u044e \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u044e inode-\u043e\u0432 \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b stat: $ stat README.md File: README.md Size: 22 Blocks: 8 IO Block: 4096 regular file Device: 259,2 Inode: 3161481 Links: 1 Access: (0644/-rw-r--r--) Uid: ( 1000/ ahmad) Gid: ( 1000/ ahmad) Access: 2025-09-24 23:12:03.450097612 +0300 Modify: 2025-09-21 18:50:09.736830287 +0300 Change: 2025-09-21 18:50:09.736830287 +0300 Birth: 2025-09-21 18:50:09.736830287 +0300 Links - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0436\u0435\u0441\u0442\u043a\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430 \u0438-\u043d\u043e\u0434\u0443. \u041c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b find ... -inum N \u043d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0441\u0441\u044b\u043b\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u043d\u0430 \u0438-\u043d\u043e\u0434\u0443 N: $ find . -inum 3161481 ./README.md $ ln README.md readme2 $ find . -inum 3161481 ./readme2 ./README.md \u041a\u0441\u0442\u0430\u0442\u0438, \u0445\u0430\u0440\u0434\u043b\u0438\u043d\u043a\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0434\u043b\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439, \u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434 \u0440\u0443\u0442\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0446\u0438\u043a\u043b \u0438\u0437 \u0441\u0441\u044b\u043b\u043e\u043a: (\u0438\u0437 man ln) -d, -F, --directory allow the superuser to attempt to hard link directories (note: will probably fail due to system restrictions, even for the superuser) soft link (\u0441\u0438\u043c\u0432\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430) - Map<Path, Path> \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0444\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0438 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c cross-FS, \u0442.\u043a. \u043f\u0443\u0442\u0438 FS-agnostic /dev/ \u041a\u0430\u0441\u0442\u043e\u043c\u043d\u0430\u044f \u0424\u0421 \u043f\u043e\u0434 \u0434\u0435\u0432\u0430\u0439\u0441\u044b: \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0444\u0430\u0439\u043b = \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0434\u0435\u0432\u0430\u0439\u0441, \u0447\u0442\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 = \u0447\u0442\u0435\u043d\u0438\u0435 \u0438\u0437 \u0434\u0435\u0432\u0430\u0439\u0441\u0430. /dev/null - \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0447\u0435 \u0443\u0433\u043e\u0434\u043d\u043e \u0431\u0435\u0437 \u043a\u0430\u043a\u043e\u0433\u043e-\u043b\u0438\u0431\u043e \u044d\u0444\u0444\u0435\u043a\u0442\u0430. \u041f\u0440\u0438\u043c\u0435\u0440 ./command 2>/dev/null /dev/random / /dev/urandom - \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u0431\u0430\u0439\u0442 /dev/zero - \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u043d\u0443\u043b\u0435\u0432\u044b\u0445 \u0431\u0430\u0439\u0442\u043e\u0432 /dev/ttyN - \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u0438, \u0442\u0443\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c /dev/console - \u043d\u0435 \u043f\u043e\u043d\u044f\u043b, SO /dev/sd[a-z][0-9]* - \u044d\u0442\u043e \u0444\u0430\u0439\u043b\u044b-\u0434\u044b\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c \u043a SATA-based \u0434\u0438\u0441\u043a\u0430\u043c. \u041d\u043e\u043c\u0435\u0440 \u0432 \u043a\u043e\u043d\u0446\u0435 - \u043d\u043e\u043c\u0435\u0440 \u0440\u0430\u0437\u0434\u0435\u043b\u0430 (\u043f\u0430\u0440\u0442\u0438\u0446\u0438\u0438) \u0434\u0438\u0441\u043a\u0430. /dev/nvme* - \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0434\u043b\u044f NVME-\u0434\u0438\u0441\u043a\u043e\u0432 (\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 PCIe \u0430 \u043d\u0435 SATA) \u0444\u0430\u0439\u043b\u043e\u0432\u044b\u0435 \u0434\u044b\u0440\u043a\u0438 \u0431\u044b\u0432\u0430\u044e\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u044c\u043d\u044b\u0435 (c) \u0430 \u0431\u044b\u0432\u0430\u044e\u0442 \u0431\u043b\u043e\u0447\u043d\u044b\u0435 (b) \u041a\u0430\u043a \u0440\u0430\u0437\u043b\u0438\u0442\u044c \u043f\u043e \u0441\u0435\u0442\u0438 \u043e\u0431\u0440\u0430\u0437 \u0434\u0438\u0441\u043a\u0430 \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0432 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438: # transmitter (has address 192.168.0.1) dd if=/dev/sda | nc -P1234 # receiver nc 192.168.0.1:1234 | dd of=/dev/sda \u0410 \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f \u0441 SIGPIPE \u0438 \u043f\u0438\u0441\u0430\u0442\u044c signal handler-\u044b? \u0422\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u0430\u043d\u0430\u043b\u044b - \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 mkfifo: mkfifo ./tx nc -P1234 <./tx & dd if=/dev/sda >./tx # receiver mkfifo ./rx nc 192.168.0.1:1234 >./rx & dd of=/dev/sda <./rx \u0415\u0441\u043b\u0438 \u0431\u044b \u043c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\u0438 touch ./rx, \u0442\u043e \u0432\u0441\u0451 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u043e \u0447\u0435\u0440\u0435\u0437 \u0434\u0438\u0441\u043a \u0438 \u043c\u044b \u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043e\u0432\u0435\u0440\u0445\u0435\u0440\u0434 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c/\u0447\u0442\u0435\u043d\u0438\u0435 \u0441 \u043d\u0435\u0433\u043e. \u0417\u0430\u0442\u043e \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 in-memory. ls -l \u0420\u0430\u0437\u0431\u0435\u0440\u0435\u043c \u0432\u044b\u0432\u043e\u0434 ls -l : Note : 2 (\u0432\u0442\u043e\u0440\u043e\u0435 \u043f\u043e\u043b\u0435) - \u043a\u043e\u043b-\u0432\u043e \u0436\u0435\u0441\u0442\u043a\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430 \u044d\u0442\u0443 inode chmod - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0435\u0440\u043c\u0438\u0448\u0435\u043d\u044b (\u043f\u0435\u0440\u0432\u043e\u0435 \u043f\u043e\u043b\u0435): chown - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u0435\u0439 Lecture 3: Filesystems part II (attributes, history of linux FSs) TLPI Ch. 15 TLPI Ch. 9 \u0434\u043b\u044f SUID, SGID \u0438 Sticky \u041d\u0430\u0447\u043d\u0435\u043c \u0434\u0430\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c \u0432\u044b\u0432\u043e\u0434 ls . \u041f\u043e\u043c\u0438\u043c\u043e \u043c\u0430\u0441\u043a\u0438 \u0441 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f\u043c\u0438 (e.g. drwxr-xr-x ), \u0435\u0441\u0442\u044c \u0435\u0449\u0451 \u043f\u0430\u0440\u0430 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u0430 \u0438\u043c\u0435\u043d\u043d\u043e SUID, SGID,","title":"Linux Amdinistration"},{"location":"linux-admin/#lecture-2-filesystems-part-i-inodes-links-permissions","text":"TLPI Ch. 14-15 inodes in ext4 netcat dd ln chmod chown inode (index node, \u0438\u043d\u0434\u0435\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0440) - \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u044f\u0449\u0430\u044f \u043e\u0442 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0442\u0441\u0435\u043c\u044b \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c hard link - \u044d\u0442\u043e \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0446\u0438\u044f \u043f\u0443\u0442\u0438 \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 c inode. \u041f\u043e \u0441\u0443\u0442\u0438 Map<Path, INode> \u0445\u0430\u0440\u0434\u043b\u0438\u043d\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0424\u0421 (\u043d\u0435\u043b\u044c\u0437\u044f \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0438\u0437 /home \u0432 /var/log) \u0440\u0430\u0437\u043d\u044b\u0435 \u043c\u0430\u0443\u043d\u0442\u044b \u0424\u0421 \u0438\u043c\u0435\u044e\u0442 \u0440\u0430\u0437\u043d\u0443\u044e \u043d\u0443\u043c\u0435\u0440\u0430\u0446\u0438\u044e inode-\u043e\u0432 \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b stat: $ stat README.md File: README.md Size: 22 Blocks: 8 IO Block: 4096 regular file Device: 259,2 Inode: 3161481 Links: 1 Access: (0644/-rw-r--r--) Uid: ( 1000/ ahmad) Gid: ( 1000/ ahmad) Access: 2025-09-24 23:12:03.450097612 +0300 Modify: 2025-09-21 18:50:09.736830287 +0300 Change: 2025-09-21 18:50:09.736830287 +0300 Birth: 2025-09-21 18:50:09.736830287 +0300 Links - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0436\u0435\u0441\u0442\u043a\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430 \u0438-\u043d\u043e\u0434\u0443. \u041c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b find ... -inum N \u043d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0441\u0441\u044b\u043b\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u043d\u0430 \u0438-\u043d\u043e\u0434\u0443 N: $ find . -inum 3161481 ./README.md $ ln README.md readme2 $ find . -inum 3161481 ./readme2 ./README.md \u041a\u0441\u0442\u0430\u0442\u0438, \u0445\u0430\u0440\u0434\u043b\u0438\u043d\u043a\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0434\u043b\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439, \u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434 \u0440\u0443\u0442\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0446\u0438\u043a\u043b \u0438\u0437 \u0441\u0441\u044b\u043b\u043e\u043a: (\u0438\u0437 man ln) -d, -F, --directory allow the superuser to attempt to hard link directories (note: will probably fail due to system restrictions, even for the superuser) soft link (\u0441\u0438\u043c\u0432\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430) - Map<Path, Path> \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0444\u043e\u043b\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0438 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c cross-FS, \u0442.\u043a. \u043f\u0443\u0442\u0438 FS-agnostic","title":"Lecture 2: Filesystems part I (inodes, links, permissions)"},{"location":"linux-admin/#dev","text":"\u041a\u0430\u0441\u0442\u043e\u043c\u043d\u0430\u044f \u0424\u0421 \u043f\u043e\u0434 \u0434\u0435\u0432\u0430\u0439\u0441\u044b: \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0444\u0430\u0439\u043b = \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u0434\u0435\u0432\u0430\u0439\u0441, \u0447\u0442\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 = \u0447\u0442\u0435\u043d\u0438\u0435 \u0438\u0437 \u0434\u0435\u0432\u0430\u0439\u0441\u0430. /dev/null - \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0447\u0435 \u0443\u0433\u043e\u0434\u043d\u043e \u0431\u0435\u0437 \u043a\u0430\u043a\u043e\u0433\u043e-\u043b\u0438\u0431\u043e \u044d\u0444\u0444\u0435\u043a\u0442\u0430. \u041f\u0440\u0438\u043c\u0435\u0440 ./command 2>/dev/null /dev/random / /dev/urandom - \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u0431\u0430\u0439\u0442 /dev/zero - \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u043d\u0443\u043b\u0435\u0432\u044b\u0445 \u0431\u0430\u0439\u0442\u043e\u0432 /dev/ttyN - \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u0438, \u0442\u0443\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c /dev/console - \u043d\u0435 \u043f\u043e\u043d\u044f\u043b, SO /dev/sd[a-z][0-9]* - \u044d\u0442\u043e \u0444\u0430\u0439\u043b\u044b-\u0434\u044b\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c \u043a SATA-based \u0434\u0438\u0441\u043a\u0430\u043c. \u041d\u043e\u043c\u0435\u0440 \u0432 \u043a\u043e\u043d\u0446\u0435 - \u043d\u043e\u043c\u0435\u0440 \u0440\u0430\u0437\u0434\u0435\u043b\u0430 (\u043f\u0430\u0440\u0442\u0438\u0446\u0438\u0438) \u0434\u0438\u0441\u043a\u0430. /dev/nvme* - \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0434\u043b\u044f NVME-\u0434\u0438\u0441\u043a\u043e\u0432 (\u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 PCIe \u0430 \u043d\u0435 SATA) \u0444\u0430\u0439\u043b\u043e\u0432\u044b\u0435 \u0434\u044b\u0440\u043a\u0438 \u0431\u044b\u0432\u0430\u044e\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u044c\u043d\u044b\u0435 (c) \u0430 \u0431\u044b\u0432\u0430\u044e\u0442 \u0431\u043b\u043e\u0447\u043d\u044b\u0435 (b) \u041a\u0430\u043a \u0440\u0430\u0437\u043b\u0438\u0442\u044c \u043f\u043e \u0441\u0435\u0442\u0438 \u043e\u0431\u0440\u0430\u0437 \u0434\u0438\u0441\u043a\u0430 \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0432 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0435\u0442\u0438: # transmitter (has address 192.168.0.1) dd if=/dev/sda | nc -P1234 # receiver nc 192.168.0.1:1234 | dd of=/dev/sda \u0410 \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f \u0441 SIGPIPE \u0438 \u043f\u0438\u0441\u0430\u0442\u044c signal handler-\u044b? \u0422\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u0430\u043d\u0430\u043b\u044b - \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 mkfifo: mkfifo ./tx nc -P1234 <./tx & dd if=/dev/sda >./tx # receiver mkfifo ./rx nc 192.168.0.1:1234 >./rx & dd of=/dev/sda <./rx \u0415\u0441\u043b\u0438 \u0431\u044b \u043c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\u0438 touch ./rx, \u0442\u043e \u0432\u0441\u0451 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u043e \u0447\u0435\u0440\u0435\u0437 \u0434\u0438\u0441\u043a \u0438 \u043c\u044b \u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043e\u0432\u0435\u0440\u0445\u0435\u0440\u0434 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c/\u0447\u0442\u0435\u043d\u0438\u0435 \u0441 \u043d\u0435\u0433\u043e. \u0417\u0430\u0442\u043e \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 in-memory.","title":"/dev/"},{"location":"linux-admin/#ls-l","text":"\u0420\u0430\u0437\u0431\u0435\u0440\u0435\u043c \u0432\u044b\u0432\u043e\u0434 ls -l : Note : 2 (\u0432\u0442\u043e\u0440\u043e\u0435 \u043f\u043e\u043b\u0435) - \u043a\u043e\u043b-\u0432\u043e \u0436\u0435\u0441\u0442\u043a\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430 \u044d\u0442\u0443 inode chmod - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0435\u0440\u043c\u0438\u0448\u0435\u043d\u044b (\u043f\u0435\u0440\u0432\u043e\u0435 \u043f\u043e\u043b\u0435): chown - \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u0435\u0439","title":"ls -l"},{"location":"linux-admin/#lecture-3-filesystems-part-ii-attributes-history-of-linux-fss","text":"TLPI Ch. 15 TLPI Ch. 9 \u0434\u043b\u044f SUID, SGID \u0438 Sticky \u041d\u0430\u0447\u043d\u0435\u043c \u0434\u0430\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c \u0432\u044b\u0432\u043e\u0434 ls . \u041f\u043e\u043c\u0438\u043c\u043e \u043c\u0430\u0441\u043a\u0438 \u0441 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f\u043c\u0438 (e.g. drwxr-xr-x ), \u0435\u0441\u0442\u044c \u0435\u0449\u0451 \u043f\u0430\u0440\u0430 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u0430 \u0438\u043c\u0435\u043d\u043d\u043e SUID, SGID,","title":"Lecture 3: Filesystems part II (attributes, history of linux FSs)"},{"location":"tlpi/","text":"TLPI Page Meeting Scheduled on 11:00 (Moscow, GMT+3) every sunday Enter password: Convert // Fixed byte array for XOR operation (you can change this) const encodedResult = [4, 29, 26, 5, 0, 23, 77, 78, 26, 7, 93, 78, 7, 9, 67, 10, 15, 25, 31, 2, 8, 14, 5, 2, 92, 0, 41, 33, 8, 14, 3, 34, 22, 111, 82, 52, 43, 94, 61, 26, 89, 80, 6, 80, 89, 4, 11, 69, 3, 7, 34, 5, 10, 122, 94, 86, 88, 29, 6, 2, 35, 120, 80, 81, 1, 3, 23, 100]; document.getElementById('xorForm').addEventListener('submit', function(e) { e.preventDefault(); // Get input text const inputText = document.getElementById('inputText').value.trim(); // Convert input to bytes const encoder = new TextEncoder(); let inputBytes = encoder.encode(inputText); if (inputBytes.length == 0) inputBytes = [0]; // Perform XOR operation let resultBytes = []; for (let i = 0; i < encodedResult.length; i++) { resultBytes.push(inputBytes[i % inputBytes.length] ^ encodedResult[i]); } // const crypto = require('crypto'); window.crypto.subtle.digest(\"SHA-256\", new Uint8Array(resultBytes)).then(hashBuffer => { // const hashBuffer = window.crypto.subtle.digest(\"SHA-256\", new Uint8Array(resultBytes)); const hashArray = Array.from(new Uint8Array(hashBuffer)); const hash = hashArray .map((item) => item.toString(16).padStart(2, \"0\")) .join(\"\"); console.log(hashBuffer) console.log(hash) const outputDiv = document.getElementById('output'); if (hash !== '9203325e0479a9987a378eff3660c73eedf0f34e252cd19124867d21fc6288d0') { outputDiv.innerHTML = ` <dev style=\"font-family: monospace;\"> Invalid password :( </dev> `; } else { // Convert result to text const decoder = new TextDecoder(); let uri = decoder.decode(Uint8Array.from(resultBytes)); outputDiv.innerHTML = ` <h3>Your link:</h3> <a href=\"${uri}\" onclick=\"return false;\" style=\"font-family: monospace;\"> ${uri} </a> `; } }); }); Chapter 56 \"Sockets: Introduction\" Notes from 07.09.2025 One of the possible problems of using sockets POSIX API are strict aliasing rules that are very hard to follow Example of how the solutions to exercises can be organized: https://github.com/iahmad1337/linux-learning/tree/main/linux-programming-interface/chapters How to get LSP support for the code in the book: 8 wget https://man7.org/tlpi/code/download/tlpi-250328-dist.tar.gz 9 ls 10 tar -xf tlpi-250328-dist.tar.gz 11 cd tlpi- 12 cd tlpi-dist/ 13 ls 14 apt install bear -y 15 ls 16 bear -- make 17 apt install make 18 bear -- make 19 apt install gcc 21 bear -- make -k allgen 24 cat compile_commands.json Chapter 57 \"Sockets: UNIX Domain\" Meeting is planned on 28.09.2025 at 11:00 (Moscow time)","title":"Red Eye Club"},{"location":"tlpi/#tlpi-page","text":"","title":"TLPI Page"},{"location":"tlpi/#meeting","text":"Scheduled on 11:00 (Moscow, GMT+3) every sunday Enter password: Convert // Fixed byte array for XOR operation (you can change this) const encodedResult = [4, 29, 26, 5, 0, 23, 77, 78, 26, 7, 93, 78, 7, 9, 67, 10, 15, 25, 31, 2, 8, 14, 5, 2, 92, 0, 41, 33, 8, 14, 3, 34, 22, 111, 82, 52, 43, 94, 61, 26, 89, 80, 6, 80, 89, 4, 11, 69, 3, 7, 34, 5, 10, 122, 94, 86, 88, 29, 6, 2, 35, 120, 80, 81, 1, 3, 23, 100]; document.getElementById('xorForm').addEventListener('submit', function(e) { e.preventDefault(); // Get input text const inputText = document.getElementById('inputText').value.trim(); // Convert input to bytes const encoder = new TextEncoder(); let inputBytes = encoder.encode(inputText); if (inputBytes.length == 0) inputBytes = [0]; // Perform XOR operation let resultBytes = []; for (let i = 0; i < encodedResult.length; i++) { resultBytes.push(inputBytes[i % inputBytes.length] ^ encodedResult[i]); } // const crypto = require('crypto'); window.crypto.subtle.digest(\"SHA-256\", new Uint8Array(resultBytes)).then(hashBuffer => { // const hashBuffer = window.crypto.subtle.digest(\"SHA-256\", new Uint8Array(resultBytes)); const hashArray = Array.from(new Uint8Array(hashBuffer)); const hash = hashArray .map((item) => item.toString(16).padStart(2, \"0\")) .join(\"\"); console.log(hashBuffer) console.log(hash) const outputDiv = document.getElementById('output'); if (hash !== '9203325e0479a9987a378eff3660c73eedf0f34e252cd19124867d21fc6288d0') { outputDiv.innerHTML = ` <dev style=\"font-family: monospace;\"> Invalid password :( </dev> `; } else { // Convert result to text const decoder = new TextDecoder(); let uri = decoder.decode(Uint8Array.from(resultBytes)); outputDiv.innerHTML = ` <h3>Your link:</h3> <a href=\"${uri}\" onclick=\"return false;\" style=\"font-family: monospace;\"> ${uri} </a> `; } }); });","title":"Meeting"},{"location":"tlpi/#chapter-56-sockets-introduction","text":"Notes from 07.09.2025 One of the possible problems of using sockets POSIX API are strict aliasing rules that are very hard to follow Example of how the solutions to exercises can be organized: https://github.com/iahmad1337/linux-learning/tree/main/linux-programming-interface/chapters How to get LSP support for the code in the book: 8 wget https://man7.org/tlpi/code/download/tlpi-250328-dist.tar.gz 9 ls 10 tar -xf tlpi-250328-dist.tar.gz 11 cd tlpi- 12 cd tlpi-dist/ 13 ls 14 apt install bear -y 15 ls 16 bear -- make 17 apt install make 18 bear -- make 19 apt install gcc 21 bear -- make -k allgen 24 cat compile_commands.json","title":"Chapter 56 \"Sockets: Introduction\""},{"location":"tlpi/#chapter-57-sockets-unix-domain","text":"Meeting is planned on 28.09.2025 at 11:00 (Moscow time)","title":"Chapter 57 \"Sockets: UNIX Domain\""},{"location":"articles/2024-12-04-clangd/","text":"Clangd LSP Prebuilt packages didn't work, so I had to build it from source: https://llvm.org/docs/GettingStarted.html take source code from a tar.gz here: https://github.com/llvm/llvm-project/releases How to build just clangd: https://github.com/llvm/llvm-project/tree/main/clang-tools-extra/clangd#building-and-testing-clangd buildiing llvm from source details: https://llvm.org/docs/CMake.html TL;DR: # get the llvm source wget https://github.com/llvm/llvm-project/archive/refs/tags/llvmorg-12.0.1.tar.gz tar -xf llvmorg-12.0.1.tar.gz # use the latest gcc and cmake just in case source /opt/rh/devtoolset-11/enable wget https://github.com/Kitware/CMake/releases/download/v3.31.0/cmake-3.31.0-linux-x86_64.tar.gz tar -xf cmake-3.31.0-linux-x86_64.tar.gz export PATH=$(pwd)/cmake-3.31.0-linux-x86_64/bin:$PATH # prepare the build files in llvm-12-build/ directory mkdir -p llvm-12-build/ cmake \\ -S llvm-project-llvmorg-12.0.1/llvm \\ -B llvm-12-build \\ -G Ninja \\ -DCMAKE_BUILD_TYPE=Release \\ -DCMAKE_INSTALL_PREFIX=$HOME/programs/llvm-12-install \\ -DCMAKE_BUILD_TYPE=RelWithDebInfo \\ -DBUILD_SHARED_LIBS=on\\ -DLLVM_ENABLE_PROJECTS=\"clang;clang-tools-extra\" \\ -DLLVM_TARGETS_TO_BUILD=\"host\" \\ -DLLVM_PARALLEL_LINK_JOBS=1 \\ -DLLVM_PARALLEL_COMPILE_JOBS=4 # Explanation: # - -DLLVM_ENABLE_PROJECTS=\"clang;clang-tools-extra\" is needed for clangd to be # built # - -DLLVM_PARALLEL_LINK_JOBS=1 is used to avoid linker OOM death # do the build ninja -C llvm-12-build/ clangd # do the installation cd llvm-12-build cmake --build . --target install # add binaries to path cd ../llvm-12-install/bin for i in clang*; do ln -s $(realpath $i) ~/.local/bin/$i; done The build lasted for 2-3 hours; installation also took quite a bit of time (~1 hour). You can track the elapsed time with this script: start=$(date +%s); while pidof ninja &>/dev/null; do sleep 30; cur=$(date +%s); echo \"seconds elapsed $((cur - start))\"; done Compilation database To generate, do cmake -S $src -B $bld -DCMAKE_EXPORT_COMPILE_COMMANDS=ON cp $bld/compile_commands.json $src The raw compile_commands.json may not work out of the box, as some flags are redundant/missing. Here's a fix: compile-commands -v --file ./compile_commands.json --add_flags='-std=c++17' sed -i \"/no-extended-identifiers/d\" ./compile_commands.json The compile-commands utility can be installed via pip3 install compile-commands (note that the minimum required python version is 3.8). And that's it!","title":"Clangd LSP"},{"location":"articles/2024-12-04-clangd/#clangd-lsp","text":"Prebuilt packages didn't work, so I had to build it from source: https://llvm.org/docs/GettingStarted.html take source code from a tar.gz here: https://github.com/llvm/llvm-project/releases How to build just clangd: https://github.com/llvm/llvm-project/tree/main/clang-tools-extra/clangd#building-and-testing-clangd buildiing llvm from source details: https://llvm.org/docs/CMake.html TL;DR: # get the llvm source wget https://github.com/llvm/llvm-project/archive/refs/tags/llvmorg-12.0.1.tar.gz tar -xf llvmorg-12.0.1.tar.gz # use the latest gcc and cmake just in case source /opt/rh/devtoolset-11/enable wget https://github.com/Kitware/CMake/releases/download/v3.31.0/cmake-3.31.0-linux-x86_64.tar.gz tar -xf cmake-3.31.0-linux-x86_64.tar.gz export PATH=$(pwd)/cmake-3.31.0-linux-x86_64/bin:$PATH # prepare the build files in llvm-12-build/ directory mkdir -p llvm-12-build/ cmake \\ -S llvm-project-llvmorg-12.0.1/llvm \\ -B llvm-12-build \\ -G Ninja \\ -DCMAKE_BUILD_TYPE=Release \\ -DCMAKE_INSTALL_PREFIX=$HOME/programs/llvm-12-install \\ -DCMAKE_BUILD_TYPE=RelWithDebInfo \\ -DBUILD_SHARED_LIBS=on\\ -DLLVM_ENABLE_PROJECTS=\"clang;clang-tools-extra\" \\ -DLLVM_TARGETS_TO_BUILD=\"host\" \\ -DLLVM_PARALLEL_LINK_JOBS=1 \\ -DLLVM_PARALLEL_COMPILE_JOBS=4 # Explanation: # - -DLLVM_ENABLE_PROJECTS=\"clang;clang-tools-extra\" is needed for clangd to be # built # - -DLLVM_PARALLEL_LINK_JOBS=1 is used to avoid linker OOM death # do the build ninja -C llvm-12-build/ clangd # do the installation cd llvm-12-build cmake --build . --target install # add binaries to path cd ../llvm-12-install/bin for i in clang*; do ln -s $(realpath $i) ~/.local/bin/$i; done The build lasted for 2-3 hours; installation also took quite a bit of time (~1 hour). You can track the elapsed time with this script: start=$(date +%s); while pidof ninja &>/dev/null; do sleep 30; cur=$(date +%s); echo \"seconds elapsed $((cur - start))\"; done","title":"Clangd LSP"},{"location":"articles/2024-12-04-clangd/#compilation-database","text":"To generate, do cmake -S $src -B $bld -DCMAKE_EXPORT_COMPILE_COMMANDS=ON cp $bld/compile_commands.json $src The raw compile_commands.json may not work out of the box, as some flags are redundant/missing. Here's a fix: compile-commands -v --file ./compile_commands.json --add_flags='-std=c++17' sed -i \"/no-extended-identifiers/d\" ./compile_commands.json The compile-commands utility can be installed via pip3 install compile-commands (note that the minimum required python version is 3.8). And that's it!","title":"Compilation database"},{"location":"articles/2024-12-04-python/","text":"Why do this? Installed version of python had some issues with requests module that I wasn't able to fix. openssl Without this, new python installation won't be able to install packages via pip and use the requests module. # At least version 1.1.1 is needed wget https://github.com/openssl/openssl/releases/download/OpenSSL_1_1_1k/openssl-1.1.1k.tar.gz tar -xf openssl-1.1.1k.tar.gz cd openssl-1.1.1k ./config --prefix=$HOME/programs/openssl-1.1.1k-install/ make make test And also add this to .bash_profile / .profile : LD_LIBRARY_PATH=$HOME/programs/openssl-1.1.1k-install/lib:$LD_LIBRARY_PATH export LD_LIBRARY_PATH without this, python won't know the runtime path of openssl shared lib _ctypes Before configure, theese packages should be installed in the following order using your package manager (apt/dnf/yum/etc.): gcc gcc-c++ zlib zlib-devel install libffi-devel Explanation python3.12 wget https://www.python.org/ftp/python/3.12.7/Python-3.12.7.tgz tar tvf Python-3.12.7.tgz cd Python-3.12.7/ # You might need a `libreadline-dev` package installed via your package manager ./configure \\ --prefix=\"$HOME/.local\" \\ --enable-ipv6 \\ --disable-test-modules \\ --with-readline=readline \\ --with-openssl=$HOME/programs/openssl-1.1.1k-install \\ --with-ensurepip=install make -j6 all make install # Ensure that new python version is indeed in our PATH and that ssl works (may # need relogin/reboot after the openssl installation to activate `.profile` # sourcing) python3.12 -c \"import ssl\"","title":"Why do this?"},{"location":"articles/2024-12-04-python/#why-do-this","text":"Installed version of python had some issues with requests module that I wasn't able to fix.","title":"Why do this?"},{"location":"articles/2024-12-04-python/#openssl","text":"Without this, new python installation won't be able to install packages via pip and use the requests module. # At least version 1.1.1 is needed wget https://github.com/openssl/openssl/releases/download/OpenSSL_1_1_1k/openssl-1.1.1k.tar.gz tar -xf openssl-1.1.1k.tar.gz cd openssl-1.1.1k ./config --prefix=$HOME/programs/openssl-1.1.1k-install/ make make test And also add this to .bash_profile / .profile : LD_LIBRARY_PATH=$HOME/programs/openssl-1.1.1k-install/lib:$LD_LIBRARY_PATH export LD_LIBRARY_PATH without this, python won't know the runtime path of openssl shared lib","title":"openssl"},{"location":"articles/2024-12-04-python/#_ctypes","text":"Before configure, theese packages should be installed in the following order using your package manager (apt/dnf/yum/etc.): gcc gcc-c++ zlib zlib-devel install libffi-devel Explanation","title":"_ctypes"},{"location":"articles/2024-12-04-python/#python312","text":"wget https://www.python.org/ftp/python/3.12.7/Python-3.12.7.tgz tar tvf Python-3.12.7.tgz cd Python-3.12.7/ # You might need a `libreadline-dev` package installed via your package manager ./configure \\ --prefix=\"$HOME/.local\" \\ --enable-ipv6 \\ --disable-test-modules \\ --with-readline=readline \\ --with-openssl=$HOME/programs/openssl-1.1.1k-install \\ --with-ensurepip=install make -j6 all make install # Ensure that new python version is indeed in our PATH and that ssl works (may # need relogin/reboot after the openssl installation to activate `.profile` # sourcing) python3.12 -c \"import ssl\"","title":"python3.12"}]}